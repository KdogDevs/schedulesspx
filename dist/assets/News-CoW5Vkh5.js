import{c as e,j as t}from"./index-BKLr2_me.js";import{b as r}from"./vendor-B9h2YEfa.js";const l=()=>{const[l,n]=r.useState([]),[a,s]=r.useState(null),[i,o]=r.useState(!0),{currentTheme:c}=e();r.useEffect((()=>{d()}),[]);const d=async()=>{try{const e="https://simple-proxy.devs4u.workers.dev/",t="https://spxgoldenlines.com/feed/",r=await fetch(`${e}?destination=${encodeURIComponent(t)}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const l=await r.text(),a=new DOMParser,s=a.parseFromString(l,"text/xml").querySelectorAll("item"),i=Array.from(s).map((e=>({title:e.querySelector("title")?.textContent,link:e.querySelector("link")?.textContent,pubDate:e.querySelector("pubDate")?.textContent,description:e.querySelector("description")?.textContent,content:e.querySelector("content\\:encoded")?.textContent,imageUrl:m(e)})));n(i),x(i),o(!1)}catch(e){o(!1)}},m=e=>{const t=e.querySelector("content\\:encoded")?.textContent;if(t){const e=document.createElement("div");e.innerHTML=t;const r=e.querySelector("img");if(r){const e=r.getAttribute("srcset");if(e){const t=e.split(",").map((e=>{const[t,r]=e.trim().split(" ");return{url:t,width:r?parseInt(r.replace("w","")):0}})).sort(((e,t)=>t.width-e.width));if(t.length>0)return t[0].url}return r.getAttribute("src")}}const r=e.querySelector("description")?.textContent;if(r){const e=document.createElement("div");e.innerHTML=r;const t=e.querySelector("img");if(t)return t.getAttribute("src")}const l=e.querySelector("media\\:content");if(l&&"image"===l.getAttribute("medium"))return l.getAttribute("url");const n=e.querySelector("enclosure");return n&&n.getAttribute("type")?.startsWith("image/")?n.getAttribute("url"):null},x=e=>{const t=new Date,r=Math.floor(t.getTime()/6048e5)%e.length;s(e[r])},u=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),h=({article:e})=>t.jsx("div",{className:`${c.main} rounded-lg shadow-lg overflow-hidden border-2 ${c.border} relative animate-fadeIn`,children:t.jsxs("div",{className:"flex flex-col md:flex-row relative",children:[t.jsx("div",{className:"absolute inset-0 rounded-lg",style:{background:`linear-gradient(to top right, ${c.accent}33, transparent)`,zIndex:1}}),e.imageUrl&&t.jsx("div",{className:"md:w-2/3 relative z-10",children:t.jsx("img",{src:e.imageUrl,alt:e.title||"Featured article image",className:"w-full h-64 md:h-[500px] object-cover",onError:e=>{e.target.style.display="none",e.target.parentElement.classList.remove("md:w-2/3"),e.target.parentElement.parentElement.querySelector("div:last-child").classList.remove("md:w-1/3"),e.target.parentElement.parentElement.querySelector("div:last-child").classList.add("w-full")}})}),t.jsxs("div",{className:`p-6 ${e.imageUrl?"md:w-1/3":"w-full"} flex flex-col justify-between relative z-10`,children:[t.jsxs("div",{children:[t.jsx("span",{className:`${c.accent} ${c.text} text-sm font-bold px-3 py-1 rounded-lg mb-2 inline-block`,children:"Featured Story"}),t.jsx("h2",{className:`${c.text} text-2xl md:text-3xl font-bold mb-4`,children:e.title}),t.jsx("p",{className:`${c.text} opacity-80 text-sm mb-4`,children:u(e.pubDate)}),t.jsx("div",{className:`${c.text} mb-6 overflow-hidden line-clamp-4`,dangerouslySetInnerHTML:{__html:e.description}})]}),t.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:`${c.accent} ${c.text} font-bold py-3 px-6 rounded-lg inline-block transition-all duration-300 hover:opacity-80`,children:"Read Full Story"})]})]})}),g=({article:e,index:r})=>t.jsxs("div",{className:`${c.main} rounded-lg shadow-lg overflow-hidden border-2 ${c.border} relative animate-fadeIn h-full flex flex-col`,style:{animationDelay:100*r+"ms"},children:[t.jsx("div",{className:"absolute inset-0 rounded-lg",style:{background:`linear-gradient(to top right, ${c.accent}33, transparent)`,zIndex:1}}),e.imageUrl&&t.jsx("div",{className:"relative z-10 h-56",children:t.jsx("img",{src:e.imageUrl,alt:e.title||"Article image",className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.parentElement.style.height="0"}})}),t.jsxs("div",{className:"p-5 relative z-10 flex-grow flex flex-col "+(e.imageUrl?"":"h-full"),children:[t.jsx("h2",{className:`${c.text} text-xl font-semibold mb-2 line-clamp-2`,children:e.title}),t.jsx("p",{className:`${c.text} opacity-80 text-sm mb-3`,children:u(e.pubDate)}),t.jsx("div",{className:`${c.text} mb-4 overflow-hidden line-clamp-3 flex-grow`,dangerouslySetInnerHTML:{__html:e.description}}),t.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:`${c.accent} ${c.text} font-bold py-2 px-4 rounded-lg inline-block transition-all duration-300 hover:opacity-80 mt-auto`,children:"Read More"})]})]});return i?t.jsx("div",{className:"h-screen overflow-y-auto",children:t.jsx("div",{className:`${c.main} w-full min-h-screen flex items-center justify-center`,children:t.jsxs("div",{className:`${c.main} rounded-lg shadow-lg p-8 border-2 ${c.border} relative`,children:[t.jsx("div",{className:"absolute inset-0 rounded-lg",style:{background:`linear-gradient(to top right, ${c.accent}33, transparent)`,zIndex:1}}),t.jsx("div",{className:`${c.text} text-center text-xl relative z-10 animate-pulse`,children:"Loading news..."})]})})}):t.jsx("div",{className:"h-screen overflow-y-auto",children:t.jsxs("div",{className:`${c.main} w-full`,children:[t.jsxs("div",{className:"container mx-auto px-4 py-6",children:[t.jsx("h1",{className:`text-4xl font-bold mb-8 text-center ${c.text}`,children:"Latest News"}),a&&t.jsx("div",{className:"mb-12",children:t.jsx(h,{article:a})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 auto-rows-auto pb-12",children:l.filter((e=>e!==a)).map(((e,r)=>t.jsx("div",{className:"h-full",children:t.jsx(g,{article:e,index:r})},r)))})]}),t.jsx("div",{className:"h-16"})]})})};export{l as default};
