import{c as e,e as t,j as s,m as a}from"./index-BKLr2_me.js";import{b as r}from"./vendor-B9h2YEfa.js";import{S as n,a as o}from"./index-Decjn-sn.js";const i=()=>{const{currentTheme:i}=e(),{weekSchedule:l,isLoading:d,fetchSchedule:c}=t();r.useEffect((()=>{c()}),[c]);const[m,p]=r.useState(new Date),[h,x]=r.useState(""),[u,g]=r.useState([]),[f,y]=r.useState(!0),[b,w]=r.useState(null),[j,v]=r.useState((new Date).toLocaleDateString("en-US",{weekday:"long"})),[N,S]=r.useState(!1),[k,$]=r.useState(!1),T=()=>{const e=document.querySelector(".fixed-content");e&&e.scrollTo({top:0,behavior:"smooth"})},D=()=>s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map(((e,t)=>s.jsxs("div",{className:`${i.secondary} p-4 rounded-lg border-2 ${i.border} shadow-lg animate-pulse`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/4"}),s.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/4"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full"}),s.jsx("div",{className:"h-4 bg-gray-300 rounded w-24"})]}),s.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full"}),s.jsx("div",{className:"h-4 bg-gray-300 rounded w-24"})]}),s.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-full mx-auto mt-2"})]})]},t)))});r.useEffect((()=>{const e=async()=>{try{0===u.length?y(!0):$(!0);const e=(e=>{const t=new Date,s=t.getDay(),a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(e)-s,r=new Date(t);return r.setDate(t.getDate()+a),r.toISOString().split("T")[0].replace(/-/g,"")})(j),t=await o.get(`https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/scoreboard?dates=${e}`);S(!1);const s=t.data.events.map((e=>({id:e.id,name:e.name,homeTeam:{...e.competitions[0].competitors.find((e=>"home"===e.homeAway)),seed:e.competitions[0].competitors.find((e=>"home"===e.homeAway))?.curatedRank?.current},awayTeam:{...e.competitions[0].competitors.find((e=>"away"===e.homeAway)),seed:e.competitions[0].competitors.find((e=>"away"===e.homeAway))?.curatedRank?.current},status:e.status.type.state,clock:e.status.displayClock,period:e.status.period,gameDate:e.date,gameTime:e.competitions[0]?.status?.type?.shortDetail,link:`https://www.espn.com/mens-college-basketball/game/_/gameId/${e.id}`})))||[];g(s),y(!1),$(!1)}catch(e){e.response&&429===e.response.status?(S(!0),w("ESPN API rate limit reached. Try again later.")):w("Failed to fetch game data"),y(!1),$(!1)}};e();const t=setInterval(e,1e4);return()=>clearInterval(t)}),[j]),r.useEffect((()=>{const e=e=>{const t=Math.floor(e/1e3),s=Math.floor(t/60),a=Math.floor(s/60),r=Math.floor(a/24);return r>0?`${r}d ${a%24}h ${s%60}m`:a>0?`${a}h ${s%60}m ${t%60}s`:s>0?`${s}m ${t%60}s`:`${t}s`},t=(e,t)=>{document.title=t?`${e} - ${t}`:"Schedule-SPX"},s=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],a=e=>{let t=s[(s.indexOf(e)+1)%7],a=0;for(;!l[t]&&a<7;)t=s[(s.indexOf(t)+1)%7],a++;return a<7?t:null},r=setInterval((()=>{const s=new Date;p(s);const r=s.toLocaleDateString("en-US",{weekday:"long"}),n=l[r];if(Array.isArray(n)&&n.length>0){const o=e=>{if(!e)return null;const[t,a]=e.split(" ");let[r,n]=t.split(":").map(Number);return"pm"===a?.toLowerCase()&&12!==r?r+=12:"am"===a?.toLowerCase()&&12===r&&(r=0),new Date(s.getFullYear(),s.getMonth(),s.getDate(),r,n)},i=n.find((e=>{const[,t]=e.split(" - "),[a,r]=t.split("-").map((e=>o(e.trim())));return a&&r&&s>=a&&s<r}));if(i){const[a,r]=i.split(" - "),[,n]=r.split("-").map((e=>o(e.trim()))),l=n-s;x(a),t(a,e(l))}else{const i=n.find((e=>{const t=o(e.split(" - ")[1].split("-")[0].trim());return t&&s<t}));if(i){const[a,r]=i.split(" - "),l=o(r.split("-")[0].trim())-s;0===n.indexOf(i)?(x("Before School"),t("School starts in",e(l))):(x(`Next: ${a}`),t(`Next: ${a}`,e(l)))}else{const e=a(r);x("After School"),e?t("Next school day",e):t("No School","")}}}else{const e=a(r);e?(x("No school today"),t("Next school day",e)):(x("No School"),t("No School",""))}}),1e3);return()=>{clearInterval(r),document.title="ScheduleSPX"}}),[l]);const M=e=>{if(!e.gameDate)return"TBD";const t=new Date(e.gameDate);return`${t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}, ${t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}`},I=e=>{let t="th";return e%10==1&&e%100!=11?t="st":e%10==2&&e%100!=12?t="nd":e%10==3&&e%100!=13&&(t="rd"),t},[L,P]=r.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed top-0 left-0 right-0 h-16 z-10 shadow-md ${i.secondary}`,style:{pointerEvents:"none"}}),s.jsxs("div",{className:`flex flex-col h-screen ${i.main} ${i.text} pattern-bg`,children:[N&&s.jsxs("div",{className:"fixed top-16 right-4 left-4 z-40 bg-red-600 text-white p-4 rounded-lg shadow-lg flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"API Rate Limit Reached!"}),s.jsx("p",{className:"text-sm",children:"Too many requests to ESPN. Data updates paused temporarily."})]}),s.jsx("button",{onClick:()=>S(!1),className:"bg-white text-red-600 px-2 py-1 rounded hover:bg-gray-100",children:"Dismiss"})]}),L&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(a.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`${i.secondary} rounded-lg p-6 max-w-md shadow-xl border-2 ${i.border}`,children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-yellow-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("h3",{className:"text-xl font-bold",children:"Entertainment Content Warning"})]}),s.jsx("p",{className:"mb-6 text-gray-700 dark:text-gray-300",children:"By proceeding you agree that you are either in lunch, out of school, or have teacher permission to view the March Madness live game. ScheduleSPX has no responsibility if you get in trouble for viewing entertainment instead of doing schoolwork."}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{onClick:()=>{P(!1)},className:"px-4 py-2 rounded-md bg-gray-300 hover:bg-gray-400 text-gray-800 transition-colors",children:"Nevermind"}),s.jsxs("button",{onClick:()=>{window.open("https://smart.link/c9upp9sl401to?cid=mml_partner_espn_generic","_blank"),P(!1)},className:"px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 text-white transition-colors flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"I understand, Proceed"]})]})]})}),s.jsx("div",{className:"flex-grow overflow-y-auto fixed-content scroll-smooth",children:s.jsxs("div",{className:"container mx-auto px-4 pt-20 pb-12",children:[s.jsxs(a.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-4xl font-bold text-center md:text-left bg-gradient-to-r from-orange-500 to-red-600 bg-clip-text text-transparent",children:"March Madness 2025"}),s.jsxs("button",{onClick:()=>{P(!0)},className:"mt-3 md:mt-0 px-5 py-2.5 bg-gradient-to-r from-red-600 to-orange-500 text-white rounded-md font-semibold hover:from-red-700 hover:to-orange-600 transition-all flex items-center shadow-lg",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[s.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),s.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Watch Live Now"]})]}),s.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`${i.secondary} border-2 ${i.border} rounded-lg p-4 mb-6 shadow-md`,children:[s.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Select Day"}),s.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(((e,t)=>s.jsx(a.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1+.05*t},onClick:()=>(e=>{v(e),setTimeout(T,100)})(e),className:"px-4 py-2.5 rounded-lg transition-all duration-200 "+(j===e?`${i.accent} font-bold shadow-md`:"hover:bg-opacity-90 hover:shadow"),children:e},e)))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`md:col-span-2 ${i.secondary} border-2 ${i.border} rounded-lg shadow-xl overflow-hidden`,children:[s.jsx("div",{className:`p-3 ${i.accent} border-b-2 ${i.border}`,children:s.jsxs("h2",{className:"text-lg font-bold text-center",children:["Games for ",j]})}),s.jsx("div",{className:"p-5",children:(()=>{if(f&&0===u.length)return s.jsx(D,{});if(b&&0===u.length)return s.jsx("div",{className:"text-center p-4 text-red-500",children:b});if(0===u.length&&!f)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 14h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("p",{className:"text-xl font-semibold",children:["No games scheduled for ",j]}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Try selecting a different day"})]});const e=[...u].sort(((e,t)=>{const s=e=>{if("in"!==e.status)return!1;const t=e.period>=2,s=e.clock?e.clock.split(":"):["0","00"],a=parseFloat(s[0])+parseFloat(s[1])/60;return t&&a<=4},a=s(e),r=s(t);if(a&&!r)return-1;if(!a&&r)return 1;if(e.status!==t.status){if("in"===e.status)return-1;if("in"===t.status)return 1;if("pre"===e.status)return-1;if("pre"===t.status)return 1}if("in"===e.status&&"in"===t.status){if(e.period!==t.period)return e.period-t.period;return(e.clock?e.clock.split(":").reduce(((e,t)=>60*parseInt(e)+parseInt(t)),0):0)-(t.clock?t.clock.split(":").reduce(((e,t)=>60*parseInt(e)+parseInt(t)),0):0)}return 0}));return s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 "+(k?"opacity-70":""),children:[k&&s.jsx("div",{className:"fixed bottom-4 right-4 bg-blue-500 text-white px-3 py-1 rounded-full text-xs shadow-lg z-30 animate-pulse",children:"Updating..."}),e.map((e=>{let t=!1,r=!1;if("post"===e.status&&e.homeTeam.score&&e.awayTeam.score){const s=parseInt(e.homeTeam.score),a=parseInt(e.awayTeam.score);t=s>a,r=a>s}const n="in"===e.status&&e.period>=2&&e.clock&&parseFloat(e.clock.split(":")[0])<=4,o=(e=>{if(!e.gameDate)return"Time TBD";const t=new Date(e.gameDate),s=new Date(t);s.setHours(s.getHours()+3);const a=60*t.getHours()+t.getMinutes(),r=60*s.getHours()+s.getMinutes(),n=920;if(a>=n||r<=480)return"Doesn't Happen During School";const o=[{name:"Before School",start:0,end:480},{name:"Period 1",start:480,end:535},{name:"Period 2",start:535,end:590},{name:"Period 3",start:590,end:645},{name:"Period 4",start:645,end:700},{name:"Period 5",start:700,end:755},{name:"Period 6",start:755,end:810},{name:"Period 7",start:810,end:865},{name:"Period 8",start:865,end:920},{name:"After School",start:920,end:1440}].filter((e=>"Before School"!==e.name&&"After School"!==e.name));let i=null,l=null;for(const m of o)a<m.end&&r>m.start&&(i||(i=m),l=m);if(!i&&a<n&&r>480)return a<480?"Happening before school starts":"Happening after school ends";if(!i)return"Doesn't Happen During School";if(a<n&&r>n){const e=parseInt(i.name.split(" ")[1]);return`Happening from ${e}${I(e)} period to after school`}const d=parseInt(i.name.split(" ")[1]),c=parseInt(l.name.split(" ")[1]);return`Happening from ${d}${I(d)} to ${c}${I(c)} period`})(e);return s.jsxs(a.div,{onClick:()=>window.open(e.link,"_blank"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`${i.secondary} p-4 rounded-lg border-2 \n                ${n?"border-red-500 shadow-[0_0_15px_rgba(239,68,68,0.7)]":i.border} \n                shadow-lg hover:scale-[1.02] transition-all duration-300 cursor-pointer\n                ${"post"===e.status?"opacity-80":""} relative group`,whileHover:{scale:1.03,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[n&&s.jsx("div",{className:"absolute inset-0 rounded-lg bg-red-500 opacity-10 animate-pulse"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-80 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-in-out z-10 backdrop-blur-sm",children:s.jsxs("div",{className:"text-white text-center p-4",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),s.jsx("p",{className:"font-bold text-lg",children:"View on ESPN"}),s.jsx("p",{className:"text-sm mt-1 text-gray-200",children:"Full stats and play-by-play"})]})}),s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("div",{className:"font-bold text-sm",children:"in"===e.status?s.jsxs("span",{className:(n?"text-red-500 font-bold":"")+" flex items-center",children:[s.jsx("span",{className:`h-2 w-2 rounded-full ${n?"bg-red-500":"bg-green-500"} mr-2 ${n?"animate-pulse":""}`}),"LIVE"]}):"post"===e.status?s.jsx("span",{className:"text-gray-500",children:"FINAL"}):M(e)}),"in"===e.status&&s.jsxs("div",{className:`text-xs px-2 py-1 rounded-full ${n?"bg-red-500 animate-pulse":"bg-green-500"} text-white font-medium`,children:[e.clock," - ",e.period<=2?1===e.period?"1st Half":"2nd Half":"OT"+(e.period-2)]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-2 rounded "+("post"===e.status&&r?"bg-opacity-10 bg-green-500":""),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[e.awayTeam.seed&&s.jsx("span",{className:"font-bold text-xs bg-gray-200 text-gray-800 rounded-full w-5 h-5 flex items-center justify-center",children:e.awayTeam.seed}),s.jsx("img",{src:e.awayTeam.team.logo,alt:e.awayTeam.team.location,className:"w-7 h-7 object-contain"}),s.jsx("span",{className:`font-medium\n                      ${"post"===e.status&&r?"font-bold":""}\n                      ${"post"!==e.status||r?"":"text-gray-500"}\n                    `,children:e.awayTeam.team.location})]}),s.jsx("span",{className:"font-bold text-lg "+("post"===e.status&&r?"text-green-600":""),children:e.awayTeam.score||"-"})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded "+("post"===e.status&&t?"bg-opacity-10 bg-green-500":""),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[e.homeTeam.seed&&s.jsx("span",{className:"font-bold text-xs bg-gray-200 text-gray-800 rounded-full w-5 h-5 flex items-center justify-center",children:e.homeTeam.seed}),s.jsx("img",{src:e.homeTeam.team.logo,alt:e.homeTeam.team.location,className:"w-7 h-7 object-contain"}),s.jsx("span",{className:`font-medium\n                      ${"post"===e.status&&t?"font-bold":""}\n                      ${"post"!==e.status||t?"":"text-gray-500"}\n                    `,children:e.homeTeam.team.location})]}),s.jsx("span",{className:"font-bold text-lg "+("post"===e.status&&t?"text-green-600":""),children:e.homeTeam.score||"-"})]}),s.jsx("div",{className:"text-xs text-center text-gray-500 pt-2 italic border-t mt-2",children:o})]})]},e.id)}))]})})()})]}),s.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:`${i.secondary} border-2 ${i.border} rounded-lg shadow-xl overflow-hidden`,children:[s.jsx("div",{className:`p-3 ${i.accent} border-b-2 ${i.border}`,children:s.jsx("h2",{className:"text-lg font-bold text-center",children:"Today's Schedule"})}),s.jsx("div",{className:"p-4",children:d?s.jsx("div",{className:"space-y-3 animate-pulse",children:[...Array(5)].map(((e,t)=>s.jsx("div",{className:"h-6 bg-gray-300 rounded w-full"},t)))}):l?s.jsx(n,{weekSchedule:l,compact:!0}):s.jsx("div",{className:"text-center p-4",children:"No schedule data available"})})]})]})]})})]}),s.jsx("style",{jsx:!0,children:`\n        .fixed-content {\n          height: 100vh;\n          width: 100%;\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch;\n          scroll-behavior: smooth;\n        }\n        \n        .pattern-bg {\n          background-color: ${i.main};\n          background-image: ${i.main.includes("dark")?"radial-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px)":"radial-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px)"};\n          background-size: 20px 20px;\n        }\n      `})]})};export{i as default};
